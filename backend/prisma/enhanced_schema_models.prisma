// Enhanced Prisma Schema for Resources, Conduct Notes, and Photos
// Add these models to your existing schema.prisma file

model StudentPhoto {
  id          Int      @id @default(autoincrement())
  studentId   String
  photoType   String   // 'profile', 'family', 'passport', 'document'
  fileName    String
  filePath    String
  fileSize    Int
  mimeType    String
  uploadedBy  String
  uploadedAt  DateTime @default(now())
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@index([studentId])
  @@index([photoType])
}

model ConductNote {
  id          Int      @id @default(autoincrement())
  studentId   String
  studentName String
  className   String
  streamName  String
  noteType    String   // 'positive', 'negative', 'warning', 'achievement'
  title       String
  description String
  severity    String   // 'low', 'medium', 'high'
  teacherId   String
  teacherName String
  date        DateTime @default(now())
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@index([studentId])
  @@index([noteType])
  @@index([date])
}

model ResourceFile {
  id          Int      @id @default(autoincrement())
  title       String
  description String?
  fileName    String
  filePath    String
  fileSize    Int
  mimeType    String
  fileType    String   // 'image', 'document', 'video', 'audio'
  category    String   // 'academic', 'administrative', 'student', 'teacher'
  classIds    String?  // JSON array of class IDs
  uploadedBy  String
  uploadedAt  DateTime @default(now())
  isPublic    Boolean  @default(false)
  downloadCount Int    @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@index([fileType])
  @@index([category])
  @@index([uploadedBy])
}

model StudentDocument {
  id          Int      @id @default(autoincrement())
  studentId   String
  studentName String
  documentType String  // 'birth_certificate', 'report_card', 'medical', 'other'
  fileName    String
  filePath    String
  fileSize    Int
  mimeType    String
  uploadedBy  String
  uploadedAt  DateTime @default(now())
  isVerified  Boolean  @default(false)
  verifiedBy  String?
  verifiedAt  DateTime?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@index([studentId])
  @@index([documentType])
}

model TeacherResource {
  id          Int      @id @default(autoincrement())
  teacherId   String
  teacherName String
  resourceType String  // 'lesson_plan', 'worksheet', 'assessment', 'presentation'
  subject     String
  className   String?
  title       String
  description String?
  fileName    String
  filePath    String
  fileSize    Int
  mimeType    String
  uploadedAt  DateTime @default(now())
  isShared    Boolean  @default(false)
  downloadCount Int    @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@index([teacherId])
  @@index([resourceType])
  @@index([subject])
}
